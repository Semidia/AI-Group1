# 第一阶段快速测试指南

## 🚀 快速开始（5分钟测试）

### 步骤1：启动服务（3个终端窗口）

**终端1 - 启动数据库**
```bash
cd ../../正式搭建/backend
docker-compose up -d
```

**终端2 - 启动后端**
```bash
cd ../../正式搭建/backend
npm install  # 如果还没安装
npm run dev
```

**终端3 - 启动前端**
```bash
cd ../../正式搭建/frontend
npm install  # 如果还没安装
npm run dev
```

### 步骤2：验证测试（浏览器）

1. **健康检查**
   - 访问：http://localhost:3000/health
   - 应该看到：`{"status":"ok","timestamp":"..."}`

2. **数据库测试**
   - 访问：http://localhost:3000/api/test/db
   - 应该看到：`{"status":"ok","message":"Database connected"}`

3. **Redis测试**
   - 访问：http://localhost:3000/api/test/redis
   - 应该看到：`{"status":"ok","message":"Redis connected"}`

4. **前端页面**
   - 访问：http://localhost:5173/
   - 应该看到首页

5. **WebSocket测试**
   - 访问：http://localhost:5173/test-websocket
   - 应该看到连接状态为"已连接"

### 步骤3：运行自动化测试

**Windows:**
```powershell
cd 各阶段测试用/第一阶段测试
.\test-phase1.ps1
```

**Linux/Mac:**
```bash
cd 各阶段测试用/第一阶段测试
chmod +x test-phase1.sh
./test-phase1.sh
```

## ✅ 测试检查清单

- [ ] 后端服务器启动成功（端口3000）
- [ ] 前端服务器启动成功（端口5173）
- [ ] 健康检查接口返回正确
- [ ] 数据库连接测试通过
- [ ] Redis连接测试通过
- [ ] 前端页面可以访问
- [ ] WebSocket连接成功
- [ ] 自动化测试脚本全部通过

## 🔧 常见问题快速解决

### 问题：端口被占用
```bash
# 检查端口占用
netstat -ano | findstr :3000  # Windows
lsof -i :3000                 # Mac/Linux

# 修改端口（在.env文件中）
PORT=3001  # 后端
```

### 问题：Docker容器未启动
```bash
cd ../../正式搭建/backend
docker-compose up -d
docker ps  # 检查容器状态
```

### 问题：数据库连接失败
```bash
# 检查.env文件中的DATABASE_URL
# 确保格式为：postgresql://user:password@localhost:5432/game_db
```

### 问题：npm install失败
```bash
# 清除缓存重试
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

## 📊 测试结果示例

### 成功示例
```
==========================================
第一阶段：项目基础搭建 - 自动化测试
==========================================

1. 检查服务状态
----------------------------------------
检查 后端服务器 (端口 3000)... ✓ 运行中
检查 前端服务器 (端口 5173)... ✓ 运行中
检查 PostgreSQL (端口 5432)... ✓ 运行中
检查 Redis (端口 6379)... ✓ 运行中

2. 测试后端接口
----------------------------------------
测试 健康检查... ✓ 通过
测试 数据库连接... ✓ 通过
测试 Redis连接... ✓ 通过

3. 检查代码质量
----------------------------------------
✓ 后端代码质量检查通过
✓ 前端代码质量检查通过

4. 检查Docker容器
----------------------------------------
✓ PostgreSQL容器运行中
✓ Redis容器运行中

==========================================
测试结果汇总
==========================================
通过: 10
失败: 0

✓ 所有测试通过！第一阶段完成！
```

## 🎯 下一步

所有测试通过后，可以开始第二阶段：用户认证系统

