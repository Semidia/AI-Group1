# 三人联机游戏演示脚本 (同一教室内)

本指南旨在帮助你在课堂演示中让 3-5 名真实玩家共同参与游戏。

## 1. 准备工作 (房主/开发者电脑)

1.  **确定局域网 IP**：
    -   打开 PowerShell，输入 `ipconfig`。
    -   查找“IPv4 地址”，通常是 `192.168.x.x`。
    -   **记录此 IP** (假设为 `192.168.1.10`)。

2.  **配置并启动后端**：
    -   确保 `.env` 中的 `CORS_ORIGIN` 允许访问，或依赖我们已实现的动态检测策略。
    -   运行 `npm run dev` 启动后端。

3.  **配置并启动前端**：
    -   进入 `frontend` 目录。
    -   修改 `.env` 文件：`VITE_API_BASE_URL=http://192.168.1.10:3000` (使用你的局域网 IP)。
    -   运行 `npm run dev -- --host` (必须带 `--host` 参数，否则其他电脑无法通过 IP 访问)。

## 2. 玩家加入流程 (其他同学的电脑)

1.  **接入同一网络**：确保所有玩家都连接在教室内同一个 Wi-Fi 或有线网络下。
2.  **通过浏览器访问**：
    -   在浏览器输入：`http://192.168.1.10:5173` (使用房主的 IP 和前端端口)。
3.  **极简注册**：每位同学只需输入 **用户名** 和 **密码** 即可快速注册并登录（已移除邮箱要求）。

## 3. 游戏开始 (房主操作)

1.  **创建房间**：房主创建一个新房间。
2.  **同学加入**：其他同学在房间列表刷新并点击“加入”。
3.  **主持人配置**：
    -   房主进入“主持人设定”。
    -   API 令牌可使用本地 Mock 或真实的 OpenAI 令牌。
    -   设置“决策主体数”等于现在的玩家总数。
4.  **开始游戏**：点击启动，开始第一回合！

## 4. 常见问题排查

-   **无法连接**：检查房主电脑的 **防火墙**，尝试临时关闭防火墙或允许 3000 和 5173 端口。
-   **WebSocket 错误**：确保 `server.ts` 中的跨域策略已部署（已执行）。
-   **AI 无响应**：检查 API Key 是否有效，或检查后端日志确认推演引擎状态。
