# é•¿å‘¨æœŸäº‹ä»¶ç›‘æ§ç³»ç»Ÿ - é—®é¢˜è¯Šæ–­ä¸ä¿®å¤æ€»ç»“

## é—®é¢˜è¯Šæ–­

### å‘ç°çš„ä¸‰ä¸ªä¸»è¦é—®é¢˜ï¼š

#### é—®é¢˜ 1ï¼šEventMonitor ç»„ä»¶æœªå¯¼å…¥å’Œä½¿ç”¨ âŒ
**ä½ç½®**: `src/App.jsx`

**åŸå› **ï¼š
- EventMonitor ç»„ä»¶åœ¨ `src/components/EventMonitor/EventMonitor.jsx` ä¸­å®Œæ•´å®ç°
- ä½† App.jsx ä¸­**æœªå¯¼å…¥**è¯¥ç»„ä»¶
- åœ¨ App.jsx çš„æ¸²æŸ“ä»£ç ä¸­**æœªä½¿ç”¨**è¯¥ç»„ä»¶

**ç—‡çŠ¶**ï¼š
- å‰ç«¯ç½‘é¡µä¸Šçœ‹ä¸åˆ°ä»»ä½•äº‹ä»¶ç›‘æ§ç•Œé¢
- å³ä½¿äº‹ä»¶ç³»ç»Ÿåœ¨åå°è¿è¡Œï¼Œä¹Ÿæ— æ³•æ˜¾ç¤º

---

#### é—®é¢˜ 2ï¼šEventMonitor ç»„ä»¶ç¼ºå°‘å®æ—¶æ›´æ–°æœºåˆ¶ âŒ
**ä½ç½®**: `src/components/EventMonitor/EventMonitor.jsx` (ç¬¬20-28è¡Œ)

**åŸå› **ï¼š
```javascript
useEffect(() => {
    const updateDisplay = () => {
        setEventSummary(eventManager.getEventSummary())
    }
    updateDisplay()
    // å¦‚æœéœ€è¦å®æ—¶æ›´æ–°ï¼Œå¯ä»¥è®¾ç½®å®šæ—¶å™¨  â† å®šæ—¶å™¨è¢«æ³¨é‡Šäº†
    // const timer = setInterval(updateDisplay, 1000)
    // return () => clearInterval(timer)
}, [])
```

**ç—‡çŠ¶**ï¼š
- EventMonitor åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ›´æ–°ä¸€æ¬¡
- ä¹‹åçš„äº‹ä»¶å˜åŒ–æ— æ³•è¢«æ£€æµ‹
- æ–°åˆ›å»ºæˆ–å®Œæˆçš„äº‹ä»¶ä¸ä¼šåœ¨ UI ä¸Šåæ˜ 

---

#### é—®é¢˜ 3ï¼šæ¸¸æˆæµç¨‹ä¸­å¯èƒ½ç¼ºå°‘äº‹ä»¶åˆ›å»ºçš„è§¦å‘ âš ï¸
**ä½ç½®**: `src/engine/gameLogic.js`, `src/App.jsx`

**æ£€æŸ¥ç»“æœ**ï¼š
- âœ… gameLogic.js å·²é›†æˆ `eventManager.updateEvents()` æ¥æ›´æ–°äº‹ä»¶è¿›åº¦
- âœ… eventSystemExamples.js ä¸­æœ‰åˆ›å»ºäº‹ä»¶çš„ç¤ºä¾‹
- âš ï¸ ä½† App.jsx ä¸­å¯èƒ½æ²¡æœ‰è°ƒç”¨äº‹ä»¶åˆ›å»ºå‡½æ•°æ¥åˆå§‹åŒ–æµ‹è¯•äº‹ä»¶

---

## åº”ç”¨çš„ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ 1ï¼šå¯¼å…¥å¹¶ä½¿ç”¨ EventMonitor ç»„ä»¶
**æ–‡ä»¶**: `src/App.jsx`

```javascript
// æ·»åŠ å¯¼å…¥ï¼ˆç¬¬7è¡Œï¼‰
import { EventMonitor } from './components/EventMonitor/EventMonitor';
import { eventManager } from './engine/eventSystem';

// åœ¨å·¦ä¾§è¾¹æ ä¸­æ·»åŠ ç»„ä»¶ï¼ˆåŸç¬¬820è¡Œå‘¨å›´ï¼‰
<EventMonitor />
```

âœ… **å·²å®æ–½**

---

### ä¿®å¤ 2ï¼šå¯ç”¨ EventMonitor å®æ—¶æ›´æ–°
**æ–‡ä»¶**: `src/components/EventMonitor/EventMonitor.jsx` (ç¬¬13-33è¡Œ)

å°†æ³¨é‡Šæ‰çš„å®šæ—¶å™¨ä»£ç å¯ç”¨ï¼š
```javascript
useEffect(() => {
    const updateDisplay = () => {
        setEventSummary(eventManager.getEventSummary())
    }

    updateDisplay()
    // å¯ç”¨å®æ—¶æ›´æ–°å®šæ—¶å™¨ - æ¯1000msæ›´æ–°ä¸€æ¬¡
    const timer = setInterval(updateDisplay, 1000)
    
    // æ¸…ç†å®šæ—¶å™¨
    return () => clearInterval(timer)
}, [])
```

âœ… **å·²å®æ–½**

---

### ä¿®å¤ 3ï¼šéªŒè¯äº‹ä»¶ç³»ç»Ÿçš„å®Œæ•´æµç¨‹

å·²éªŒè¯çš„é›†æˆç‚¹ï¼š
- âœ… `eventSystem.js` - äº‹ä»¶ç±»å’Œäº‹ä»¶ç®¡ç†å™¨å®šä¹‰å®Œæ•´
- âœ… `gameLogic.js` - `updateGameEvents()` å‡½æ•°æ­£ç¡®é›†æˆ
- âœ… `eventSystemExamples.js` - åˆ›å»ºäº‹ä»¶çš„ç¤ºä¾‹ä»£ç å­˜åœ¨
- âœ… `EventMonitor.jsx` - UI ç»„ä»¶å®Œæ•´å®ç°
- âœ… `App.jsx` - ç°å·²å¯¼å…¥å’Œä½¿ç”¨ EventMonitor

---

## å®Œæ•´çš„å·¥ä½œæµç¨‹

### 1ï¸âƒ£ äº‹ä»¶åˆ›å»º
```javascript
import { eventManager } from './engine/eventSystem';

// åœ¨æŸä¸ª AI å†³ç­–æˆ–ç©å®¶æ“ä½œæ—¶
eventManager.createAndAddEvent(
    'event_id',
    'äº‹ä»¶æè¿°',
    5,  // æŒç»­å›åˆæ•°
    'å®Œæˆæç¤ºè¯'  // å®Œæˆåçš„ç³»ç»Ÿæç¤º
);
```

### 2ï¸âƒ£ äº‹ä»¶è¿›åº¦æ›´æ–°
åœ¨æ¯ä¸ªæ¸¸æˆå›åˆä¸­è°ƒç”¨ï¼ˆgameLogic.js å·²å®ç°ï¼‰ï¼š
```javascript
const updateResult = eventManager.updateEvents();
// è¿”å›å®Œæˆçš„äº‹ä»¶å’Œè¿›åº¦æ–‡æœ¬
```

### 3ï¸âƒ£ UI æ˜¾ç¤º
- EventMonitor ç»„ä»¶æ¯ç§’æ£€æŸ¥ `eventManager.getEventSummary()`
- è‡ªåŠ¨æ˜¾ç¤ºï¼š
  - æ­£åœ¨è¿›è¡Œçš„äº‹ä»¶åˆ—è¡¨
  - æ¯ä¸ªäº‹ä»¶çš„è¿›åº¦æ¡ï¼ˆå½“å‰å›åˆ/æ€»å›åˆï¼‰
  - å·²å®Œæˆäº‹ä»¶æ•°
  - è¿›åº¦ç™¾åˆ†æ¯”

### 4ï¸âƒ£ äº‹ä»¶å®Œæˆå¤„ç†
å½“äº‹ä»¶å®Œæˆæ—¶ï¼š
- äº‹ä»¶ç§»è‡³å·²å®Œæˆåˆ—è¡¨
- ç”Ÿæˆå®Œæˆæç¤ºè¯
- æ³¨å…¥åˆ° AI çš„ç³»ç»Ÿæç¤ºä¸­

---

## æµ‹è¯•æŒ‡å—

### æµ‹è¯•æ­¥éª¤ï¼š

1. **å¯åŠ¨åº”ç”¨**
   ```bash
   npm run dev
   ```

2. **åˆ›å»ºæµ‹è¯•äº‹ä»¶**ï¼ˆåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼‰
   ```javascript
   // å¯¼å…¥ç®¡ç†å™¨ï¼ˆéœ€è¦åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼‰
   const { eventManager } = window.__eventSystem; // éœ€è¦æš´éœ²ç»™å…¨å±€ä½œç”¨åŸŸ
   
   // æˆ–åœ¨ App.jsx ä¸­ç›´æ¥åˆ›å»ºäº‹ä»¶
   eventManager.createAndAddEvent(
       'test_event',
       'æµ‹è¯•é•¿æœŸäº‹ä»¶',
       3,  // 3ä¸ªå›åˆ
       'æµ‹è¯•äº‹ä»¶å·²å®Œæˆï¼'
   );
   ```

3. **è§‚å¯Ÿ UI å˜åŒ–**
   - å·¦ä¾§è¾¹æ åº”è¯¥æ˜¾ç¤º "ğŸ¯ äº‹ä»¶è·Ÿè¸ª"
   - æ˜¾ç¤ºæ´»è·ƒäº‹ä»¶åˆ—è¡¨
   - è¿›åº¦æ¡åº”è¯¥æ˜¾ç¤º "1/3"

4. **æ‰§è¡Œæ¸¸æˆå›åˆ**
   - æ¯æ‰§è¡Œä¸€ä¸ªç©å®¶æ“ä½œï¼Œäº‹ä»¶è¿›åº¦åº”è¯¥è‡ªåŠ¨å¢åŠ 
   - è§‚å¯Ÿè¿›åº¦æ¡å˜åŒ–

5. **å®Œæˆäº‹ä»¶**
   - ç»§ç»­æ‰§è¡Œå›åˆç›´åˆ°äº‹ä»¶å®Œæˆ
   - åº”è¯¥çœ‹åˆ°äº‹ä»¶ä»æ´»è·ƒåˆ—è¡¨ç§»åˆ°å·²å®Œæˆåˆ—è¡¨
   - UI åº”æ˜¾ç¤º "âœ…" æ ‡è®°

---

## æ–‡ä»¶ä¿®æ”¹æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹ | çŠ¶æ€ |
|------|------|------|
| `src/App.jsx` | å¯¼å…¥ EventMonitor å’Œ eventManager | âœ… å®Œæˆ |
| `src/App.jsx` | åœ¨å·¦ä¾§è¾¹æ ä¸­ä½¿ç”¨ EventMonitor ç»„ä»¶ | âœ… å®Œæˆ |
| `src/components/EventMonitor/EventMonitor.jsx` | å¯ç”¨å®æ—¶æ›´æ–°å®šæ—¶å™¨ | âœ… å®Œæˆ |

---

## å¯é€‰çš„è¿›ä¸€æ­¥ä¼˜åŒ–

1. **åœ¨ App.jsx ä¸­æš´éœ²äº‹ä»¶ç®¡ç†å™¨åˆ°å…¨å±€ä½œç”¨åŸŸ**ï¼ˆä¾¿äºæµ‹è¯•ï¼‰
   ```javascript
   // App.jsx ä¸­
   window.__eventManager = eventManager;
   ```

2. **åœ¨æ¸¸æˆåˆå§‹åŒ–æ—¶åˆ›å»ºæ¼”ç¤ºäº‹ä»¶**
   ```javascript
   // åœ¨ initGame å
   eventManager.createAndAddEvent(
       'demo_event',
       'æ¼”ç¤ºäº‹ä»¶',
       5,
       'æ¼”ç¤ºäº‹ä»¶å·²å®Œæˆ'
   );
   ```

3. **æ·»åŠ äº‹ä»¶åˆ›å»ºçš„å‰ç«¯ UI**ï¼ˆå…è®¸ç©å®¶æˆ– AI åˆ›å»ºæ–°äº‹ä»¶ï¼‰

4. **é›†æˆäº‹ä»¶ç³»ç»Ÿä¸åç«¯** APIï¼ˆå¦‚æœéœ€è¦ï¼‰

---

## éªŒè¯ä¿®å¤

ä¿®å¤å®Œæˆåï¼ŒéªŒè¯ä»¥ä¸‹å‡ ç‚¹ï¼š

- [ ] EventMonitor ç»„ä»¶åœ¨é¡µé¢çš„å·¦ä¾§è¾¹æ å¯è§
- [ ] åˆ›å»ºäº‹ä»¶åï¼ŒUI ä¸­æ˜¾ç¤ºäº‹ä»¶åˆ—è¡¨
- [ ] äº‹ä»¶è¿›åº¦æ¡æ¯ä¸ªå›åˆéƒ½åœ¨æ›´æ–°
- [ ] äº‹ä»¶å®Œæˆåï¼Œæ˜¾ç¤ºå®Œæˆæç¤º
- [ ] æ— æ§åˆ¶å°é”™è¯¯

---

## ç›¸å…³æ–‡ä»¶æ–‡æ¡£

- [äº‹ä»¶ç³»ç»Ÿæ–‡æ¡£](src/engine/EVENT_SYSTEM_DOCS.md)
- [äº‹ä»¶ç³»ç»Ÿç¤ºä¾‹](src/engine/eventSystemExamples.js)
- [äº‹ä»¶ç³»ç»Ÿæµ‹è¯•](src/engine/eventSystemTests.js)
- [å¿«é€Ÿå‚è€ƒ](src/engine/QUICK_REFERENCE.md)

