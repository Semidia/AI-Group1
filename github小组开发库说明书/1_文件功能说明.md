# 文件功能说明书

尊敬的用户，您好！
为了方便您理解项目结构，以下是本游戏中各个关键文件的通俗解释。本游戏类似于搭积木，不同的文件代表不同功能的积木块。

> **⚠️ V2.1 更新提示**：已完成云服务器部署方案，所有正式模式相关文档已移至 `云端/` 文件夹。
> **⚠️ V2.2 更新提示**：新增初始化设定和背景故事生成功能，玩家可自定义游戏规则和 AI 行为要求。
> **⚠️ V2.3 更新提示**：优化了决策建议选项确认逻辑，实现了多选+自定义输入+手动确认的分步交互流程。
> **⚠️ V2.4 更新提示**：帮助内容模块化，将帮助按钮内的文字内容提取到独立文件中，便于统一管理和更新。
> **⚠️ V2.5 更新提示**：实现帮助内容自动同步功能，修改 markdown 文件可自动更新游戏中的帮助按钮内容。

## 1. 核心大门
- **`前端/index.html`**
  - **作用**：这是游戏的**正门入口**。
  - **解释**：就像网站的主页一样，浏览器打开游戏时首先加载这个文件。它是一个空壳，负责把游戏内容（由 JavaScript 生成）展示在屏幕上。

## 2. 幕后导演 (配置与启动)
- **`前端/package.json`**
  - **作用**：**项目身份证和工具箱清单**。
  - **解释**：记录了项目的名字、版本，以及运行游戏需要安装哪些“插件”（比如 React 框架）。
- **`前端/vite.config.js`**
  - **作用**：**施工队队长（打包工具配置）**。
  - **解释**：告诉电脑如何把这些零散的代码文件组装成一个可以运行的网页。
- **`前端/src/main.jsx`**
  - **作用**：**电源开关**。
  - **解释**：它负责把这一整套 React 游戏程序“挂载”到 index.html 这个大门上，让游戏真正跑起来。

## 3. 游戏与界面 (源代码 前端/src/)
- **`前端/src/App.jsx`**
  - **作用**：**游戏主控中心**。
  - **解释**：不仅是游戏舞台，现在还包含“游戏首页 (Landing Page)”。它负责管理“演示模式”和“正式模式”的切换，以及连接 API 的配置逻辑。
  - **新功能**：实现了 `InitSettingsModal` 组件，允许玩家输入自定义游戏规则和 AI 行为要求，生成个性化背景故事。
- **`前端/src/engine/api.js`**
  - **作用**：**通讯员 (API 客户端)**。
  - **解释**：专门负责与后端（无论是本地 Python 还是远程服务器）打电话。它包含动态配置功能，允许你更换通讯地址和密钥。
- **`前端/src/index.css`**
  - **作用**：**装修风格（全屋定制）**。
  - **解释**：定义了游戏的颜色（深蓝背景、霓虹光）、字体和基本布局。所谓的“玻璃拟态”特效就是在这里写的。

### 具体组件 (Components)
- **`前端/src/components/Dashboard/Dashboard.jsx`**
  - **作用**：**仪表盘**。
  - **解释**：界面上方显示“现金”、“士气”、“声望”和“创新”的那一排进度条。
- **`前端/src/components/Terminal/Terminal.jsx`**
  - **作用**：**剧情显示屏**。
  - **解释**：界面中间那个黑色的、像电脑终端一样的聊天记录框，显示所有发生的故事。
- **`前端/src/components/InputArea/InputArea.jsx`**
  - **作用**：**操作台**。
  - **解释**：界面下方的按钮和输入框。您点击按钮或打字的地方。
  - **新功能**：
    - 支持多选决策建议选项
    - 允许输入自定义决策内容
    - 统一的执行确认环节
    - 清晰的选中状态显示
    - 适当的提示信息

## 4. 游戏大脑 (Engine)
- **`前端/src/engine/gameLogic.js`**
  - **作用**：**本地备用规则**。
  - **解释**：在“演示模式”下使用的前端规则库。
  - **新功能**：包含完整的预制背景故事，包括公司背景、当前困境、行业环境和玩家任务。
- **`前端/src/engine/mockAI.js`**
  - **作用**：**本地备用 AI**。
  - **解释**：在“演示模式”下使用的简易 AI 逻辑。
- **`前端/src/engine/api.js`**
  - **作用**：**通讯员 (API 客户端)**。
  - **解释**：专门负责与后端（无论是本地 Python 还是远程服务器）打电话。它包含动态配置功能，允许你更换通讯地址和密钥。
  - **新功能**：增强了 `initGame` 函数，支持传递初始化设定给后端。
- **`前端/src/engine/helpContent.js`**
  - **作用**：**帮助内容管理**。
  - **解释**：存储帮助按钮中的文字内容，便于统一管理和更新。
  - **新功能**：
    - 支持 markdown 格式的帮助内容，便于渲染和维护
    - 支持自动同步机制，由 `sync-help-content.js` 脚本自动生成
    - 与 `github小组开发库说明书/帮助按钮里的内容.md` 文件双向关联
- **`sync-help-content.js`**
  - **作用**：**帮助内容自动同步工具**。
  - **解释**：自动将 markdown 文件中的帮助内容转换为前端可用的 JavaScript 文件。
  - **功能**：
    - 单次同步：`node sync-help-content.js`
    - 自动监听：`node sync-help-content.js --watch`
    - 支持从根目录或前端目录运行
    - 修改 markdown 文件后自动更新 JS 文件

## 5. 后端引擎 (Backend - Python)
> **注意**: V2.0 版本起，**正式模式**下的逻辑由此处接管。

- **`后端/main.py`**
  - **作用**: **API 网关**。
  - **解释**: 后端服务的入口。它接收来自前端的请求（比如“开始游戏”或“执行操作”），分发给引擎处理，然后把结果送回去。
  - **新功能**：将 `/api/init` 端点从 GET 改为 POST，支持接收玩家的初始化设定。
- **`后端/engine.py`**
  - **作用**: **核心规则引擎**。
  - **解释**: 正式模式的“真大脑”。这里定义了所有游戏规则、初始数值以及 Mock AI 的逻辑。
  - **新功能**：增强了 `MockAI` 类，支持保存和使用玩家的初始化设定。
- **`后端/models.py`**
  - **作用**: **数据字典**。
  - **解释**: 定义了游戏数据的“形状”。比如规定“游戏状态”必须包含现金、士气等字段，确保数据传输不出错。
  - **新功能**：添加了 `InitSettings` 模型，用于接收和处理玩家的初始化设定。

## 6. 云端部署方案
> **注意**: V2.1 版本起，所有关于云服务器部署的文档都存放在此目录。

- **`云端/云服务器现有配置的使用方案.md`**
  - **作用**: **服务器部署指南**。
  - **解释**: 详细分析了阿里云香港服务器的配置、网络优势、国际 API 使用评估、本地大模型部署可行性以及最佳使用方案。
  - **核心内容**：
    - 服务器基本信息（地理位置、公网 IP、硬件配置）
    - 国际主流 API 使用评估
    - 本地大模型部署评估
    - 用户网络环境要求
    - 项目部署适配性
    - 最佳使用方案

## 7. 文档与日志
- **`github小组开发库说明书/`**
  - **`1_文件功能说明.md`**: 本文档，项目文件的详细说明。
  - **`2_玩家手册.md`**: 游戏玩法和操作指南。
  - **`3_开发者指南.md`**: 开发者参考文档。
- **`已完成的工作/工作日志.md`**
  - **作用**: **项目进度记录**。
  - **解释**: 记录了项目从 V1.0 到 V2.1 的所有重要里程碑和已完成工作。

---
希望这份说明能帮助您更好地理解这个游戏工程！
