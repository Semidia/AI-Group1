# 项目启动说明

## 前置要求

- Node.js >= 18
- Docker & Docker Compose
- npm 或 yarn

## 快速启动

### 1. 启动数据库服务

```bash
cd backend
docker-compose up -d
```

这将启动：
- PostgreSQL (端口 5432)
- Redis (端口 6379)

### 2. 后端启动

```bash
cd backend

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，设置数据库连接等信息

# 运行数据库迁移
npm run prisma:migrate

# 启动开发服务器
npm run dev
```

后端将在 http://localhost:3000 启动

### 3. 前端启动

```bash
cd frontend

# 安装依赖
npm install

# 配置环境变量（可选）
cp .env.example .env

# 启动开发服务器
npm run dev
```

前端将在 http://localhost:5173 启动

## 验证安装

1. 访问 http://localhost:3000/health 应该返回 `{"status":"ok",...}`
2. 访问 http://localhost:5173 应该看到前端页面（登录后可进入 `/rooms` 进行房间创建/加入）

## 常见问题

### 数据库连接失败
- 确保 Docker 容器正在运行：`docker ps`
- 检查 .env 文件中的 DATABASE_URL 配置

### 端口被占用
- 修改 backend/.env 中的 PORT
- 修改 frontend/vite.config.ts 中的 port

### Prisma 迁移失败
- 确保数据库容器已启动
- 检查 DATABASE_URL 是否正确
- 运行 `npm run prisma:generate` 重新生成客户端

## 下一步
> 已通过联合脚本 `各阶段测试用/全阶段共同测试/test-phase1-3.ps1` 完成阶段1/2/3。

- 已完成：基础搭建、用户认证、房间基础流（前端 `/rooms` 列表/创建/加入/离开，订阅房间事件刷新）。
- 可继续：房间等待页与后续实时通信、Socket ack、Redis 状态缓存、第四阶段 WS 目录化处理。

