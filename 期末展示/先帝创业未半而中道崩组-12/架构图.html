<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡¡å¢™çš†æ˜¯é—¨ - æ™ºèƒ½ä½“å®æˆ˜æ¶æ„å›¾</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            /* è¡¨ç°å±‚ï¼šè“è‰² (Web) */
            --layer-ui-bg: #e3f2fd;
            --layer-ui-border: #1565c0;
            /* åº”ç”¨å±‚ï¼šç»¿è‰² (Coze/Agent) */
            --layer-app-bg: #e8f5e9;
            --layer-app-border: #2e7d32;
            /* é¢†åŸŸå±‚ï¼šæ©™çº¢è‰² (æ ¸å¿ƒä¸šåŠ¡) */
            --layer-domain-bg: #fff3e0;
            --layer-domain-border: #ef6c00;
            /* åŸºç¡€è®¾æ–½ï¼šç´«è‰² (Gemini/DB) */
            --layer-infra-bg: #f3e5f5;
            --layer-infra-border: #7b1fa2;
            
            --text-main: #37474f;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            padding: 40px;
            margin: 0;
        }

        .architecture-container {
            width: 850px;
            background: white;
            padding: 40px 50px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
        }

        /* æ ‡é¢˜åŒº */
        .header-box {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px dashed #eee;
            padding-bottom: 20px;
        }
        .header-box h1 { margin: 0; color: #263238; font-size: 26px; }
        .header-box .subtitle { margin: 8px 0 0; color: #78909c; font-size: 14px; }
        .tech-stack-tag {
            background: #263238; color: #fff; padding: 4px 10px; 
            border-radius: 4px; font-size: 12px; margin-top: 10px; display: inline-block;
        }

        /* å±‚çº§ç›’å­é€šç”¨æ ·å¼ */
        .layer-box {
            border-radius: 10px;
            padding: 15px 20px;
            position: relative;
            border-left: 6px solid;
            background: #fff;
            transition: all 0.3s ease;
        }
        .layer-box:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        .layer-label {
            position: absolute;
            left: -160px;
            top: 50%;
            transform: translateY(-50%);
            width: 140px;
            text-align: right;
        }
        .layer-label h3 { margin: 0; font-size: 16px; color: #455a64; }
        .layer-label span { font-size: 12px; color: #90a4ae; }

        .layer-title {
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
        }

        /* æ¨¡å—ç½‘æ ¼ */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .module {
            background: rgba(255,255,255,0.8);
            border: 1px solid rgba(0,0,0,0.08);
            border-radius: 6px;
            padding: 12px 5px;
            text-align: center;
            font-size: 13px;
            color: var(--text-main);
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 50px;
        }
        .module strong { display: block; margin-bottom: 3px; }
        .module span { font-size: 11px; color: #78909c; }

        /* å„å±‚ç‰¹å®šæ ·å¼ */
        .ui-layer { background-color: var(--layer-ui-bg); border-color: var(--layer-ui-border); }
        .ui-layer .layer-title { color: var(--layer-ui-border); }

        .app-layer { background-color: var(--layer-app-bg); border-color: var(--layer-app-border); }
        .app-layer .layer-title { color: var(--layer-app-border); }

        .domain-layer { background-color: var(--layer-domain-bg); border-color: var(--layer-domain-border); padding: 25px; }
        .domain-layer .layer-title { color: var(--layer-domain-border); }

        .infra-layer { background-color: var(--layer-infra-bg); border-color: var(--layer-infra-border); }
        .infra-layer .layer-title { color: var(--layer-infra-border); }

        /* é¢†åŸŸå±‚å†…éƒ¨ */
        .domain-flex { display: flex; gap: 20px; }
        .domain-sub {
            flex: 1; background: rgba(255,255,255,0.6);
            border-radius: 8px; padding: 10px;
            border: 1px dashed var(--layer-domain-border);
        }
        .core-engine { background: #fff3e0; border-left: 4px solid #ff6d00; }

        /* ç®­å¤´ */
        .arrow { text-align: center; color: #cfd8dc; font-size: 20px; margin: -12px 0; z-index: 10; }

        /* å¼€å‘ç¯å¢ƒä¾§è¾¹æ  */
        .dev-env {
            position: absolute;
            right: -140px;
            top: 100px;
            width: 100px;
            text-align: center;
            background: #212121;
            color: #fff;
            padding: 15px 5px;
            border-radius: 8px;
            font-size: 12px;
        }
        .dev-env i { font-size: 24px; display: block; margin-bottom: 5px; color: #4fc3f7; }

    </style>
</head>
<body>

    <div class="architecture-container">
        
        <div class="header-box">
            <h1>ã€Šå‡¡å¢™çš†æ˜¯é—¨ã€‹æ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„</h1>
            <div class="subtitle">AI Agent Architecture based on DDD & Coze</div>
            <div class="tech-stack-tag">Tech Stack: Coze + Gemini + Knowledge Base</div>
        </div>

        <!-- å¼€å‘ç¯å¢ƒæ ‡æ³¨ -->
        <div class="dev-env">
            <i>ğŸ’»</i>
            <strong>IDE å·¥å…·</strong><br>
            Cursor<br>
            <span style="color:#aaa; font-size:10px;">(Code & Prompt)</span>
        </div>

        <!-- 1. è¡¨ç°å±‚ (UI) -->
        <div class="layer-box ui-layer">
            <div class="layer-label">
                <h3>è¡¨ç°å±‚</h3>
                <span>Presentation</span>
            </div>
            <div class="layer-title">ğŸ–¥ï¸ ç½‘é¡µç«¯å…¥å£ (Web Interface)</div>
            <div class="module-grid">
                <div class="module"><strong>å‰§æƒ…äº¤äº’çª—å£</strong><span>Chat UI</span></div>
                <div class="module"><strong>æ•°æ®ä»ªè¡¨ç›˜</strong><span>Dashboard</span></div>
                <div class="module"><strong>å†³ç­–æŒ‡ä»¤å°</strong><span>Command Input</span></div>
                <div class="module"><strong>ä¸»æŒäººæ§åˆ¶å°</strong><span>Admin Panel</span></div>
            </div>
        </div>

        <div class="arrow">â¬‡</div>

        <!-- 2. åº”ç”¨å±‚ (Agent) -->
        <div class="layer-box app-layer">
            <div class="layer-label">
                <h3>æ™ºèƒ½ä½“ç¼–æ’å±‚</h3>
                <span>Agent Orchestration</span>
            </div>
            <div class="layer-title">âš™ï¸ Coze å·¥ä½œæµ (Workflow & Tools)</div>
            <div class="module-grid">
                <div class="module"><strong>æ¸¸æˆå¾ªç¯æœåŠ¡</strong><span>Game Loop Workflow</span></div>
                <div class="module"><strong>çŸ¥è¯†åº“æ£€ç´¢å·¥å…·</strong><span>Knowledge Retrieval</span></div>
                <div class="module"><strong>é•¿æœŸè®°å¿†è°ƒåº¦</strong><span>Memory Manager</span></div>
                <div class="module"><strong>äº‹ä»¶è§¦å‘å™¨</strong><span>Event Trigger</span></div>
            </div>
        </div>

        <div class="arrow">â¬‡</div>

        <!-- 3. é¢†åŸŸå±‚ (Core) -->
        <div class="layer-box domain-layer">
            <div class="layer-label">
                <h3>é¢†åŸŸå±‚ (æ ¸å¿ƒ)</h3>
                <span>Domain Model</span>
            </div>
            <div class="layer-title">ğŸ’ å•†ä¸šåšå¼ˆæ ¸å¿ƒé€»è¾‘</div>
            
            <div class="domain-flex">
                <!-- æ ¸å¿ƒå¼•æ“ -->
                <div class="domain-sub" style="flex:1.5;">
                    <div style="text-align:center; font-weight:bold; margin-bottom:10px; color:#ef6c00; font-size:12px;">æ ¸å¿ƒè§„åˆ™å¼•æ“</div>
                    <div class="module-grid" style="grid-template-columns: 1fr;">
                        <div class="module core-engine">
                            <strong>âš–ï¸ æ•°æ®å¯¹é½å¼•æ“ (CFO)</strong>
                            <span>ä¼šè®¡å‡†åˆ™æ ¡éªŒ / èµ„é‡‘ä¸€è‡´æ€§</span>
                        </div>
                        <div class="module core-engine">
                            <strong>ğŸ•¸ï¸ å› æœé“¾æ¨æ¼”å¼•æ“</strong>
                            <span>è·¨å‘¨æœŸæ•ˆåº” / è´è¶æ•ˆåº”è®¡ç®—</span>
                        </div>
                    </div>
                </div>
                <!-- ä¸šåŠ¡å®ä½“ -->
                <div class="domain-sub" style="flex:1.2;">
                    <div style="text-align:center; font-weight:bold; margin-bottom:10px; color:#ef6c00; font-size:12px;">ä¸šåŠ¡å®ä½“å¯¹è±¡</div>
                    <div class="module-grid" style="grid-template-columns: repeat(2, 1fr);">
                        <div class="module"><strong>ç©å®¶ä¼ä¸š</strong><span>Assets</span></div>
                        <div class="module"><strong>ç«äº‰å¯¹æ‰‹</strong><span>Rivals</span></div>
                        <div class="module"><strong>å•†ä¸šåˆåŒ</strong><span>Contracts</span></div>
                        <div class="module"><strong>å®è§‚å¸‚åœº</strong><span>Market</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="arrow">â¬‡</div>

        <!-- 4. åŸºç¡€è®¾æ–½å±‚ (Infra) -->
        <div class="layer-box infra-layer">
            <div class="layer-label">
                <h3>åŸºç¡€è®¾æ–½å±‚</h3>
                <span>Infrastructure</span>
            </div>
            <div class="layer-title">ğŸ§± æ™ºèƒ½ä½“åº•åº§ (Coze Ecosystem)</div>
            <div class="module-grid">
                <div class="module" style="border: 2px solid #ab47bc;">
                    <strong>ğŸ¤– Gemini 1.5</strong>
                    <span>LLM Model</span>
                </div>
                <div class="module" style="border: 2px solid #ab47bc;">
                    <strong>ğŸ“š çŸ¥è¯†åº“</strong>
                    <span>Vector Store (RAG)</span>
                </div>
                <div class="module">
                    <strong>ğŸ›¢ï¸ Coze DB</strong>
                    <span>Data Persistence</span>
                </div>
                <div class="module">
                    <strong>ğŸ”Œ Plugins</strong>
                    <span>External API</span>
                </div>
            </div>
        </div>

    </div>

</body>
</html>